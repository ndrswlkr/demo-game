(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=e(n);fetch(n.href,l)}})();const Tt=(i,t)=>i===t,Rt=Symbol("solid-track"),st={equals:Tt};let Mt=$t;const G=1,nt=2,St={owned:null,cleanups:null,context:null,owner:null};var w=null;let ut=null,It=null,m=null,x=null,E=null,ht=0;function tt(i,t){const e=m,s=w,n=i.length===0,l=t===void 0?s:t,o=n?St:{owned:null,cleanups:null,context:l?l.context:null,owner:l},a=n?i:()=>i(()=>C(()=>ct(o)));w=o,m=null;try{return z(a,!0)}finally{m=e,w=s}}function K(i,t){t=t?Object.assign({},st,t):st;const e={value:i,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(e.value)),At(e,n));return[Pt.bind(e),s]}function rt(i,t,e){const s=pt(i,t,!1,G);Z(s)}function Lt(i,t,e){Mt=Ot;const s=pt(i,t,!1,G);(!e||!e.render)&&(s.user=!0),E?E.push(s):Z(s)}function P(i,t,e){e=e?Object.assign({},st,e):st;const s=pt(i,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=e.equals||void 0,Z(s),Pt.bind(s)}function C(i){if(m===null)return i();const t=m;m=null;try{return i()}finally{m=t}}function N(i){Lt(()=>C(i))}function O(i){return w===null||(w.cleanups===null?w.cleanups=[i]:w.cleanups.push(i)),i}function Pt(){if(this.sources&&this.state)if(this.state===G)Z(this);else{const i=x;x=null,z(()=>at(this),!1),x=i}if(m){const i=this.observers?this.observers.length:0;m.sources?(m.sources.push(this),m.sourceSlots.push(i)):(m.sources=[this],m.sourceSlots=[i]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])}return this.value}function At(i,t,e){let s=i.value;return(!i.comparator||!i.comparator(s,t))&&(i.value=t,i.observers&&i.observers.length&&z(()=>{for(let n=0;n<i.observers.length;n+=1){const l=i.observers[n],o=ut&&ut.running;o&&ut.disposed.has(l),(o?!l.tState:!l.state)&&(l.pure?x.push(l):E.push(l),l.observers&&Et(l)),o||(l.state=G)}if(x.length>1e6)throw x=[],new Error},!1)),t}function Z(i){if(!i.fn)return;ct(i);const t=ht;Gt(i,i.value,t)}function Gt(i,t,e){let s;const n=w,l=m;m=w=i;try{s=i.fn(t)}catch(o){return i.pure&&(i.state=G,i.owned&&i.owned.forEach(ct),i.owned=null),i.updatedAt=e+1,Ct(o)}finally{m=l,w=n}(!i.updatedAt||i.updatedAt<=e)&&(i.updatedAt!=null&&"observers"in i?At(i,s):i.value=s,i.updatedAt=e)}function pt(i,t,e,s=G,n){const l={fn:i,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:w,context:w?w.context:null,pure:e};return w===null||w!==St&&(w.owned?w.owned.push(l):w.owned=[l]),l}function lt(i){if(i.state===0)return;if(i.state===nt)return at(i);if(i.suspense&&C(i.suspense.inFallback))return i.suspense.effects.push(i);const t=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<ht);)i.state&&t.push(i);for(let e=t.length-1;e>=0;e--)if(i=t[e],i.state===G)Z(i);else if(i.state===nt){const s=x;x=null,z(()=>at(i,t[0]),!1),x=s}}function z(i,t){if(x)return i();let e=!1;t||(x=[]),E?e=!0:E=[],ht++;try{const s=i();return Nt(e),s}catch(s){e||(E=null),x=null,Ct(s)}}function Nt(i){if(x&&($t(x),x=null),i)return;const t=E;E=null,t.length&&z(()=>Mt(t),!1)}function $t(i){for(let t=0;t<i.length;t++)lt(i[t])}function Ot(i){let t,e=0;for(t=0;t<i.length;t++){const s=i[t];s.user?i[e++]=s:lt(s)}for(t=0;t<e;t++)lt(i[t])}function at(i,t){i.state=0;for(let e=0;e<i.sources.length;e+=1){const s=i.sources[e];if(s.sources){const n=s.state;n===G?s!==t&&(!s.updatedAt||s.updatedAt<ht)&&lt(s):n===nt&&at(s,t)}}}function Et(i){for(let t=0;t<i.observers.length;t+=1){const e=i.observers[t];e.state||(e.state=nt,e.pure?x.push(e):E.push(e),e.observers&&Et(e))}}function ct(i){let t;if(i.sources)for(;i.sources.length;){const e=i.sources.pop(),s=i.sourceSlots.pop(),n=e.observers;if(n&&n.length){const l=n.pop(),o=e.observerSlots.pop();s<n.length&&(l.sourceSlots[o]=s,n[s]=l,e.observerSlots[s]=o)}}if(i.owned){for(t=i.owned.length-1;t>=0;t--)ct(i.owned[t]);i.owned=null}if(i.cleanups){for(t=i.cleanups.length-1;t>=0;t--)i.cleanups[t]();i.cleanups=null}i.state=0}function qt(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function Ct(i,t=w){throw qt(i)}const Wt=Symbol("fallback");function yt(i){for(let t=0;t<i.length;t++)i[t]()}function Dt(i,t,e={}){let s=[],n=[],l=[],o=0,a=t.length>1?[]:null;return O(()=>yt(l)),()=>{let d=i()||[],f,h;return d[Rt],C(()=>{let g=d.length,M,A,F,q,W,b,S,$,D;if(g===0)o!==0&&(yt(l),l=[],s=[],n=[],o=0,a&&(a=[])),e.fallback&&(s=[Wt],n[0]=tt(Ft=>(l[0]=Ft,e.fallback())),o=1);else if(o===0){for(n=new Array(g),h=0;h<g;h++)s[h]=d[h],n[h]=tt(y);o=g}else{for(F=new Array(g),q=new Array(g),a&&(W=new Array(g)),b=0,S=Math.min(o,g);b<S&&s[b]===d[b];b++);for(S=o-1,$=g-1;S>=b&&$>=b&&s[S]===d[$];S--,$--)F[$]=n[S],q[$]=l[S],a&&(W[$]=a[S]);for(M=new Map,A=new Array($+1),h=$;h>=b;h--)D=d[h],f=M.get(D),A[h]=f===void 0?-1:f,M.set(D,h);for(f=b;f<=S;f++)D=s[f],h=M.get(D),h!==void 0&&h!==-1?(F[h]=n[f],q[h]=l[f],a&&(W[h]=a[f]),h=A[h],M.set(D,h)):l[f]();for(h=b;h<g;h++)h in F?(n[h]=F[h],l[h]=q[h],a&&(a[h]=W[h],a[h](h))):n[h]=tt(y);n=n.slice(0,o=g),s=d.slice(0)}return n});function y(g){if(l[h]=g,a){const[M,A]=K(h);return a[h]=A,t(d[h],M)}return t(d[h])}}}function v(i,t){return C(()=>i(t||{}))}const Bt=i=>`Stale read from <${i}>.`;function Ht(i){const t="fallback"in i&&{fallback:()=>i.fallback};return P(Dt(()=>i.each,i.children,t||void 0))}function T(i){const t=i.keyed,e=P(()=>i.when,void 0,{equals:(s,n)=>t?s===n:!s==!n});return P(()=>{const s=e();if(s){const n=i.children;return typeof n=="function"&&n.length>0?C(()=>n(t?s:()=>{if(!C(e))throw Bt("Show");return i.when})):n}return i.fallback},void 0,void 0)}function _t(i,t,e){let s=e.length,n=t.length,l=s,o=0,a=0,d=t[n-1].nextSibling,f=null;for(;o<n||a<l;){if(t[o]===e[a]){o++,a++;continue}for(;t[n-1]===e[l-1];)n--,l--;if(n===o){const h=l<s?a?e[a-1].nextSibling:e[l-a]:d;for(;a<l;)i.insertBefore(e[a++],h)}else if(l===a)for(;o<n;)(!f||!f.has(t[o]))&&t[o].remove(),o++;else if(t[o]===e[l-1]&&e[a]===t[n-1]){const h=t[--n].nextSibling;i.insertBefore(e[a++],t[o++].nextSibling),i.insertBefore(e[--l],h),t[n]=e[l]}else{if(!f){f=new Map;let y=a;for(;y<l;)f.set(e[y],y++)}const h=f.get(t[o]);if(h!=null)if(a<h&&h<l){let y=o,g=1,M;for(;++y<n&&y<l&&!((M=f.get(t[y]))==null||M!==h+g);)g++;if(g>h-a){const A=t[o];for(;a<h;)i.insertBefore(e[a++],A)}else i.replaceChild(e[a++],t[o++])}else o++;else t[o++].remove()}}}const vt="_$DX_DELEGATE";function jt(i,t,e,s={}){let n;return tt(l=>{n=l,t===document?i():et(t,i(),t.firstChild?null:void 0,e)},s.owner),()=>{n(),t.textContent=""}}function k(i,t,e){let s;const n=()=>{const o=document.createElement("template");return o.innerHTML=i,e?o.content.firstChild.firstChild:o.content.firstChild},l=t?()=>C(()=>document.importNode(s||(s=n()),!0)):()=>(s||(s=n())).cloneNode(!0);return l.cloneNode=l,l}function Vt(i,t=window.document){const e=t[vt]||(t[vt]=new Set);for(let s=0,n=i.length;s<n;s++){const l=i[s];e.has(l)||(e.add(l),t.addEventListener(l,Yt))}}function Xt(i,t,e){return C(()=>i(t,e))}function et(i,t,e,s){if(e!==void 0&&!s&&(s=[]),typeof t!="function")return ot(i,t,s,e);rt(n=>ot(i,t(),n,e),s)}function Yt(i){const t=`$$${i.type}`;let e=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==e&&Object.defineProperty(i,"target",{configurable:!0,value:e}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return e||document}});e;){const s=e[t];if(s&&!e.disabled){const n=e[`${t}Data`];if(n!==void 0?s.call(e,n,i):s.call(e,i),i.cancelBubble)return}e=e._$host||e.parentNode||e.host}}function ot(i,t,e,s,n){for(;typeof e=="function";)e=e();if(t===e)return e;const l=typeof t,o=s!==void 0;if(i=o&&e[0]&&e[0].parentNode||i,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),o){let a=e[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),e=B(i,e,s,a)}else e!==""&&typeof e=="string"?e=i.firstChild.data=t:e=i.textContent=t;else if(t==null||l==="boolean")e=B(i,e,s);else{if(l==="function")return rt(()=>{let a=t();for(;typeof a=="function";)a=a();e=ot(i,a,e,s)}),()=>e;if(Array.isArray(t)){const a=[],d=e&&Array.isArray(e);if(dt(a,t,e,n))return rt(()=>e=ot(i,a,e,s,!0)),()=>e;if(a.length===0){if(e=B(i,e,s),o)return e}else d?e.length===0?xt(i,a,s):_t(i,e,a):(e&&B(i),xt(i,a));e=a}else if(t.nodeType){if(Array.isArray(e)){if(o)return e=B(i,e,s,t);B(i,e,null,t)}else e==null||e===""||!i.firstChild?i.appendChild(t):i.replaceChild(t,i.firstChild);e=t}}return e}function dt(i,t,e,s){let n=!1;for(let l=0,o=t.length;l<o;l++){let a=t[l],d=e&&e[i.length],f;if(!(a==null||a===!0||a===!1))if((f=typeof a)=="object"&&a.nodeType)i.push(a);else if(Array.isArray(a))n=dt(i,a,d)||n;else if(f==="function")if(s){for(;typeof a=="function";)a=a();n=dt(i,Array.isArray(a)?a:[a],Array.isArray(d)?d:[d])||n}else i.push(a),n=!0;else{const h=String(a);d&&d.nodeType===3&&d.data===h?i.push(d):i.push(document.createTextNode(h))}}return n}function xt(i,t,e=null){for(let s=0,n=t.length;s<n;s++)i.insertBefore(t[s],e)}function B(i,t,e,s){if(e===void 0)return i.textContent="";const n=s||document.createTextNode("");if(t.length){let l=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(n!==a){const d=a.parentNode===i;!l&&!o?d?i.replaceChild(n,a):i.insertBefore(n,e):d&&a.remove()}else l=!0}}else i.insertBefore(n,e);return[n]}var Ut=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},gt;typeof window<"u"&&(typeof Promise<"u"?gt=new Promise(function(i){return window.addEventListener("load",i)}):gt={then:function(i){return window.addEventListener("load",i)}});function Kt(i,t){t===void 0&&(t={});var e=t.registrationOptions;e===void 0&&(e={}),delete t.registrationOptions;var s=function(n){for(var l=[],o=arguments.length-1;o-- >0;)l[o]=arguments[o+1];t&&t[n]&&t[n].apply(t,l)};"serviceWorker"in navigator&&gt.then(function(){Ut()?(Jt(i,s,e),navigator.serviceWorker.ready.then(function(n){s("ready",n)}).catch(function(n){return J(s,n)})):(kt(i,s,e),navigator.serviceWorker.ready.then(function(n){s("ready",n)}).catch(function(n){return J(s,n)}))})}function J(i,t){navigator.onLine||i("offline"),i("error",t)}function kt(i,t,e){navigator.serviceWorker.register(i,e).then(function(s){if(t("registered",s),s.waiting){t("updated",s);return}s.onupdatefound=function(){t("updatefound",s);var n=s.installing;n.onstatechange=function(){n.state==="installed"&&(navigator.serviceWorker.controller?t("updated",s):t("cached",s))}}}).catch(function(s){return J(t,s)})}function Jt(i,t,e){fetch(i).then(function(s){s.status===404?(t("error",new Error("Service worker not found at "+i)),bt()):s.headers.get("content-type").indexOf("javascript")===-1?(t("error",new Error("Expected "+i+" to have javascript content-type, but received "+s.headers.get("content-type"))),bt()):kt(i,t,e)}).catch(function(s){return J(t,s)})}function bt(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){i.unregister()}).catch(function(i){return J(emit,i)})}class c{constructor(t,e){this.x=t,this.y=e}static random2D(){const t=new c(Math.random()*200-100,Math.random()*200-100);return t.normalize(),t}static add(t,e){const s=new c(t.x,t.y);return s.add(e),s}static sub(t,e){const s=new c(t.x,t.y);return s.sub(e),s}static mult(t,e){const s=new c(t.x,t.y);return s.mult(e),s}static div(t,e){let s=new c(t.x,t.y);return s.div(e),s}static normalize(t){let e=new c(t.x,t.y);return e.normalize(),e}set(t,e){this.x=t,this.y=e}clone(){return new c(this.x,this.y)}add(t){this.x+=t.x,this.y+=t.y}sub(t){this.x-=t.x,this.y-=t.y}mult(t){this.x*=t,this.y*=t}div(t){this.x/=t,this.y/=t}mag(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}setMag(t){this.normalize(),this.mult(t)}limit(t){this.mag()>t&&this.setMag(t)}normalize(){let t=this.mag();t!==0&&this.mult(1/t)}setHeading(t){let e=this.mag();this.x=Math.sin(t)*e,this.y=Math.cos(t)*e}heading(){return Math.atan2(this.x,this.y)}rotate(t){let e=this.heading()+t;this.setHeading(e)}}let u=null,r=null,p;function Qt(i){u=i,u.width=window.innerWidth,u.height=window.innerHeight,r=u.getContext("2d"),p=new c(u.width/2,u.height/2),console.log("canvas registered...")}function mt(i="#000"){r.fillStyle=i,r.beginPath(),r.fillRect(0,0,u.width,u.height),r.fill(),r.closePath()}function Zt(i,t,e,s="magenta"){r.beginPath(),r.fillStyle=s,r.arc(i,t,e,0,2*Math.PI,!0),r.fill()}function zt(i,t,e,s="yellow"){r.beginPath(),r.fillStyle=s,r.moveTo(i,t-e),r.lineTo(i+e,t+e),r.lineTo(i-e,t+e),r.fill(),r.closePath(),r.beginPath(),r.fillStyle=s,r.moveTo(i,t+e+e/3),r.lineTo(i-e,t-e+e/3),r.lineTo(i+e,t-e+e/3),r.fill(),r.closePath()}let R=0,I=0,L=!1;function te(){console.log("mouse registered"),u.onmousemove=i=>{R=i.clientX,I=i.clientY},u.onpointermove=i=>{R=i.clientX,I=i.clientY},u.onmousedown=i=>{L=!0,R=i.clientX,I=i.clientY},u.onmouseup=i=>{L=!1,R=i.clientX,I=i.clientY},u.onpointerdown=i=>{L=!0,R=i.clientX,I=i.clientY},u.onpointerup=i=>{L=!1,R=i.clientX,I=i.clientY}}function ee(i,t,e){const n=(t-i)/e;console.log(n);const l=[];let o=0;for(let a=0;a<e;a++)l.push(o),o+=n;return l}function wt(i,t,e){return i>=e&&(i=e),i<=t&&(i=t),i}function it(i,t=0){return t===0?Math.random()*i:i+Math.random()*t}function ie(i,t,e){return(e-t)*i+t}class Q{constructor(t,e,s){this.pos=new c(t,e),this.r=Math.sqrt(s)*1.2,this.mass=s,this.vel=c.random2D(),this.vel.setMag(Math.random()*.01+.01),this.acc=new c(0,0)}edges(){this.pos.y>=u.height-this.r&&(this.pos.y=u.height-this.r,this.vel.y*=-1),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.x*=-1),this.pos.x>=u.width-this.r&&(this.pos.x=u.width-this.r,this.vel.x*=-1)}contact(){return u.height-(this.pos.y+this.r)<1}friction(){if(this.contact()){let t=c.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=c.normalize(this.vel);t.mult(-1);let e=2,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}attract(t){let e=c.sub(this.pos,t.pos),s=e.mag(),n=s*s;n=wt(n,100,1e3);let o=1*(this.mass*t.mass)/n;e.setMag(o),t.applyForce(e)}applyForce(t){let e=c.div(t,this.mass);this.acc.add(e)}update(){this.vel.add(this.acc),this.pos.add(this.vel),this.acc.set(0,0)}draw(){r.beginPath(),r.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI,!0),this.contact()?r.fillStyle="#f005":r.fillStyle="#0f05",r.fill(),r.closePath()}}class se{constructor(t,e,s){this.pos=new c(t,e),this.color="#0aa5",this.r=Math.sqrt(s)*10,this.mass=s,this.vel=new c(0,0),this.acc=new c(0,0)}edges(){this.pos.y>=u.height-this.r&&(this.pos.y=u.height-this.r,this.vel.y*=-1),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.y*=-1),this.pos.x>=u.width-this.r&&(this.pos.x=u.width-this.r,this.vel.x*=-1)}contact(){return u.height-(this.pos.y+this.r)<1}friction(){if(this.contact()){let t=c.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=c.normalize(this.vel);t.mult(-1);let e=.01,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}applyForce(t){let e=c.div(t,this.mass);this.acc.add(e)}attract(t){let e=c.sub(this.pos,t.pos),s=e.mag(),n=s*s;n=wt(n,100,400);let o=5*(this.mass*t.mass)/n;e.setMag(o),t.applyForce(e)}update(){this.vel.add(this.acc),this.vel.limit(25),this.pos.add(this.vel)}draw(){r.beginPath(),r.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI,!0),this.contact()?r.fillStyle="#f005":r.fillStyle=this.color,r.fill(),r.closePath()}}let ne=class{constructor(){this.run=!1,this.width=u.width,this.height=u.height,this.players=[],this.attractor=new se(u.width/2,u.height/3.5,18),this.actor=new Q(u.width*.3,u.height*.3,3);for(let t=0;t<20;t++)this.players.push(new Q(Math.random()*u.width,40,12+Math.random()*15))}update(){let t=new c(0,.09),e=new c(.09,0);this.actor.update(),this.attractor.attract(this.actor),this.players.forEach((s,n)=>{s.applyForce(c.mult(t,s.mass)),L&&(console.log("wind"),s.applyForce(e)),s.pos.y>u.height*.55&&s.drag(),s.update(),s.edges(),n>10&&this.attractor.attract(s)})}draw(){r.fillStyle="#00000004",r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath(),r.fillStyle="#00a1",r.beginPath(),r.fillRect(0,this.height*.55,this.width,this.height),r.fill(),r.closePath(),this.attractor.draw(),this.actor.draw(),this.players.forEach(t=>{t.draw()})}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},H;function re(){return N(()=>{H=new ne,H.run=!0,H.animate()}),O(()=>{H.run=!1,H.animate=()=>{},H=""}),[]}class le{constructor(){this.run=!1,this.width=u.width,this.height=u.height,this.movers=[];let t=new c(this.width/2,this.height/2);for(let e=0;e<300;e++){let s=c.random2D();s.setMag(100+it(50)),s.add(t);let n=s.x,l=s.y;this.movers.push(new Q(n,l,5))}}update(){this.movers.forEach(t=>{for(let e of this.movers)t!==e&&t.attract(e);t.update()})}draw(){this.background("#066a"),this.movers.forEach(t=>{t.draw()})}background(t="#000"){r.fillStyle=t,r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}}var ae=k("<div>");let _;function oe(){return N(()=>{_=new le,_.run=!0,_.animate()}),O(()=>{_.run=!1,_=""}),ae()}class he{constructor(t,e,s){this.pos=new c(t,e),this.r=Math.sqrt(s)*4,this.mass=s,this.vel=c.random2D(),this.vel.setMag(Math.random()*.01+.01),this.acc=new c(0,0)}edges(){this.pos.y>=u.height-this.r&&(this.pos.y=u.height-this.r,this.vel.y*=-1),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.x*=-1),this.pos.x>=u.width-this.r&&(this.pos.x=u.width-this.r,this.vel.x*=-1)}contact(){return u.height-(this.pos.y+this.r)<1}friction(){if(this.contact()){let t=c.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=c.normalize(this.vel);t.mult(-1);let e=2,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}detract(t){let e=c.sub(this.pos,t.pos);if(e.mag()>40)return;console.log(e.mag()),e.mult(-1);let s=e.mag(),n=s*s,o=.7*(this.mass*t.mass)/n;e.setMag(o),t.applyForce(e)}attract(t){let e=c.sub(this.pos,t.pos),s=e.mag(),n=s*s,o=.1*(this.mass*t.mass)/n;e.setMag(o),t.applyForce(e)}applyForce(t){let e=c.div(t,this.mass);this.acc.add(e),this.dir=this.acc.heading()}update(){this.vel.add(this.acc),this.pos.add(this.vel),this.acc.set(0,0)}draw(){r.translate(this.pos.x,this.pos.y);let t=new c(-this.r,-this.r),e=new c(this.r,-this.r),s=new c(0,this.r*2),n=this.vel.heading();t.rotate(n),e.rotate(n),s.rotate(n),r.beginPath(),r.moveTo(t.x,t.y),r.lineTo(e.x,e.y),r.lineTo(s.x,s.y),r.lineTo(t.x,t.y),this.contact()?r.fillStyle="#f005":r.fillStyle="#000",r.fill(),r.closePath(),r.translate(-this.pos.x,-this.pos.y)}}var ce=k("<div>");let ue=class{constructor(){this.run=!1,this.width=u.width,this.height=u.height,this.sun=new Q(this.width/2,this.height/2,30),this.movers=[],this.angleI=0;let t=new c(this.width/2,this.height/2);for(let e=0;e<Math.PI*2;e+=1){let s=c.random2D();s.setMag(100),s.setHeading(e),s.add(t);let n=s.x,l=s.y;this.movers.push(new he(n,l,25))}this.moon=new Q(200,200,100),console.log("before",this.moon),console.log(2*Math.PI),console.log("heading before",this.moon.pos.heading()),this.moon.pos.setHeading(0),console.log(this.moon.pos.heading())}update(){this.movers.forEach(t=>{this.sun.attract(t);for(let s of this.movers)t!==s&&t.detract(s);t.update();let e=ie(this.angleI,0,2*Math.PI);this.moon.pos.setHeading(e),this.angleI+=1e-4})}draw(){r.reset(),this.background("#e00a"),this.movers.forEach(t=>{t.draw()}),this.sun.draw(),this.moon.draw()}background(t="#000"){r.fillStyle=t,r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},j;function fe(){return N(()=>{j=new ue,j.run=!0,j.animate()}),O(()=>{j.run=!1,j=""}),ce()}class de{constructor(t,e,s){this.pos=new c(t,e),this.vel=c.random2D(),this.vel.setMag(5)}update(){this.pos.add(this.vel)}draw(){let t=new c(0,20);t.setHeading(0),t.setHeading(this.vel.heading()),r.strokeStyle="yellow",r.lineWidth=7,r.moveTo(this.pos.x,this.pos.y),r.lineTo(this.pos.x+t.x,this.pos.y+t.y),r.stroke()}}var ge=k("<div>");let pe=class{constructor(){this.run=!1,this.width=u.width,this.height=u.height,this.caprot=new de(200,300),this.max=0,this.angleMax=0,this.spiralR=190}update(){this.caprot.update(),c.sub(p,this.caprot.pos).mag()>500&&(this.caprot.pos.set(p.x,p.y),this.caprot.vel=c.random2D(),this.caprot.vel.setMag(4))}draw(){this.background("#00000005"),this.caprot.draw(),r.strokeStyle="magenta",r.lineWidth=4,r.beginPath(),r.arc(p.x,p.y,100,0,2*Math.PI,!0),r.stroke(),r.closePath(),this.dotsOnCircle(),this.angleMax+=.09,this.spiralR-=.19,this.spiralR<=100&&(this.spiralR=190);let t=new c(200,0),e=Math.cos(this.angleMax)*this.spiralR,s=Math.sin(this.angleMax)*this.spiralR;this.dot(p.x+e,p.y+s),r.beginPath(),r.strokeStyle="lightgreen",r.lineWidth=1,t.setHeading(0),r.moveTo(p.x+t.x,p.y+t.y);for(let n=0;n<2*Math.PI;n+=.001)t.setHeading(n),r.lineTo(p.x+t.x,p.y+t.y);r.closePath(),r.stroke()}dotsOnCircle(){this.max<Math.PI*2&&(this.max+=.1),this.max>=Math.PI*2&&(this.max=0);let t=new c(100,0);for(let e=0;e<this.max;e+=2*Math.PI/12)t.setHeading(e),this.dot(p.x+t.x,p.y+t.y)}dot(t,e){r.fillStyle="yellow",r.beginPath(),r.arc(t,e,4,0,Math.PI*2,!0),r.fill(),r.closePath()}background(t="#000"){r.fillStyle=t,r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},V;function me(){return N(()=>{V=new pe,V.run=!0,V.animate()}),O(()=>{V.run=!1,V=""}),ge()}class we{constructor(t,e,s){this.amplitude=t,this.period=e,this.phase=s}calculate(t){return Math.sin(this.phase+2*Math.PI*t/this.period)*this.amplitude}calculateAudio(t){return Math.sin(2*Math.PI*t/this.period)}}var ye=k("<div>");let ve=class{constructor(){this.run=!1,this.width=u.width,this.height=u.height,this.audioCtx=null;var t={audio:!0};navigator.mediaDevices.getUserMedia(t).then(e=>{this.audioCtx=new(window.AudioContext||window.webkitAudioContext)}),this.waves=[],this.makeRandomWaves(),this.lockMouse=!1}makeRandomWaves(){this.waves=[];for(let t=0;t<7;t++)this.waves.push(new we(it(this.height/28,this.height/15),it(this.width/8,this.width),it(0,2*Math.PI)))}async playSound(){const t=this.audioCtx.createBuffer(2,this.audioCtx.sampleRate*3,this.audioCtx.sampleRate);let e=this.getRamp(t.length),s=this.getRamp(t.length);s.reverse();for(let l=0;l<t.numberOfChannels;l++){console.log(t.length);const o=t.getChannelData(l);for(let a=0;a<t.length;a++){let d=a,f=0;this.waves.forEach(y=>{f+=y.calculateAudio(d),f*=.5}),a<e.length&&(f*=e[a]);let h=t.length*.5;a>h&&(f*=s[a-h]),o[a]=f}}this.audioCtx.resume();const n=this.audioCtx.createBufferSource();n.buffer=t,n.connect(this.audioCtx.destination),n.start()}getRamp(t){let e=t*.5,s=ee(.4,1,e);return console.log(s),s}update(){L&&this.lockMouse===!1&&(this.makeRandomWaves(),this.playSound(),this.lockMouse=!0,setTimeout(()=>this.lockMouse=!1,300))}draw(){mt("#00000022");for(let t=0;t<this.width;t+=.5){let e=0;this.waves.forEach(s=>{e+=s.calculate(t)}),Zt(t,p.y+e,3,"magenta")}this.waves.forEach(t=>t.phase+=.1)}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},X;function xe(){return N(()=>{X=new ve,X.run=!0,X.animate()}),O(()=>{X.run=!1,X=""}),ye()}var be=k("<div>");let Me=class{constructor(){this.run=!1,this.width=u.width,this.height=u.height,this.lockMouse=!1,this.restLength=100,this.k=.08,this.velocity=new c(0,0),this.gravity=new c(0,4),this.anchor=new c(p.x,p.y/3),this.bob=new c(p.x,p.y*.8)}update(){L&&(this.bob.x=R,this.bob.y=I,this.velocity.set(0,0));let t=c.sub(this.bob,this.anchor),e=t.mag()-this.restLength;t.normalize(),t.mult(-1*this.k*e),this.velocity.add(t),this.velocity.add(this.gravity),this.bob.add(this.velocity),this.velocity.mult(.94)}draw(){mt("#0a0"),r.fillStyle="#010",r.beginPath(),r.arc(this.anchor.x,this.anchor.y,25,0,Math.PI*2),r.arc(this.bob.x,this.bob.y,25,0,Math.PI*2),r.fill(),r.strokeStyle="#010",r.beginPath(),r.moveTo(this.anchor.x,this.anchor.y),r.lineTo(this.bob.x,this.bob.y),r.stroke()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},Y;function Se(){return N(()=>{Y=new Me,Y.run=!0,Y.animate()}),O(()=>{Y.run=!1,Y=""}),be()}class Pe{constructor(t,e){this.pos=new c(t,e),this.vel=c.random2D(),this.vel.setMag(3),this.acc=new c(0,0),this.r=9,this.lifetime=255,this.finished=!1,this.bounce=-.7}contact(){return u.height-(this.pos.y+this.r)<1}edges(){this.pos.y>=u.height-this.r&&(this.pos.y=u.height-this.r,this.vel.y*=this.bounce),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.x*=this.bounce),this.pos.x>=u.width-this.r&&(this.pos.x=u.width-this.r,this.vel.x*=this.bounce)}friction(){if(this.contact()){let t=c.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=c.normalize(this.vel);t.mult(-1);let e=2,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}attract(t){let e=c.sub(this.pos,t.pos),s=e.mag(),n=s*s;n=wt(n,100,1e3);let o=1*(this.mass*t.mass)/n;e.setMag(o),t.applyForce(e)}applyForce(t){let e=c.div(t,1);this.acc.add(e)}update(){this.vel.add(this.acc),this.pos.add(this.vel),this.acc.set(0,0),this.lifetime-=5,this.lifetime<=0&&(this.finished=!0)}draw(){let t=`rgba(255,255,0, ${this.lifetime/255})`;zt(this.pos.x,this.pos.y,this.r,t)}}var Ae=k("<div>");class $e{constructor(){this.run=!1,this.width=u.width,this.height=u.height,this.particles=[];for(let t=0;t<10;t++)this.addParticle();this.gravity=new c(0,.5)}addParticle(t=p.x,e=p.y){this.particles.push(new Pe(t,e))}update(){L&&this.addParticle(R,I),this.particles.forEach(t=>{t.applyForce(this.gravity),t.update(),t.edges(),t.finished&&(this.particles=this.particles.filter(e=>e!==t))})}draw(){mt("#000"),this.particles.forEach(t=>{t.draw()})}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}}let U;function Ee(){return N(()=>{U=new $e,U.run=!0,U.animate()}),O(()=>{U.run=!1,U=""}),Ae()}var Ce=k("<div id=menu>"),ke=k("<div id=pile><canvas id=playground></canvas><button id=menu-button>next</button><dialog><h4>Like to get Notified?</h4><button>activate notifications"),Fe=k("<button>");let ft;function Te(){Kt("/demo-game/serviceworker.js")}const Re=async()=>Notification.permission==="granted",Ie=async()=>{if(await Notification.requestPermission()!=="granted")throw new Error("Notification permission not granted")};function Le(i){window.localStorage.setItem("pageList",JSON.stringify(i))}function Ge(){let i=window.localStorage.getItem("pageList");return i?JSON.parse(i):null}function Ne(){const[i,t]=K(!1),[e,s]=K(!1),[n,l]=K({Beginners:!1,"Mutual Attraction":!1,AngleAndRadians:!1,Drawing:!1,"Harmonic Motion":!1,"Spring Forces":!1,"Particle System":!1}),[o,a]=K(!1);N(async()=>{Te(),await Re()||t(!0),Qt(ft),te(),a(!0);let h=Ge();h&&l({...n(),...h})});function d(f){const h=n();for(let y in h)h[y]=!1;h[f]=!0,l({...h}),s(!1),Le(n())}return[v(T,{get when(){return P(()=>n().Beginners===!0)()&&o()},get children(){return v(re,{})}}),v(T,{get when(){return P(()=>n()["Mutual Attraction"]===!0)()&&o()},get children(){return v(oe,{})}}),v(T,{get when(){return P(()=>n().AngleAndRadians===!0)()&&o()},get children(){return v(fe,{})}}),v(T,{get when(){return P(()=>n().Drawing===!0)()&&o()},get children(){return v(me,{})}}),v(T,{get when(){return P(()=>n()["Harmonic Motion"]===!0)()&&o()},get children(){return v(xe,{})}}),v(T,{get when(){return P(()=>n()["Spring Forces"]===!0)()&&o()},get children(){return v(Se,{})}}),v(T,{get when(){return P(()=>n()["Particle System"]===!0)()&&o()},get children(){return v(Ee,{})}}),(()=>{var f=ke(),h=f.firstChild,y=h.nextSibling,g=y.nextSibling,M=g.firstChild,A=M.nextSibling,F=ft;return typeof F=="function"?Xt(F,h):ft=h,y.$$click=()=>s(!e()),et(f,v(T,{get when(){return e()},get children(){var q=Ce();return et(q,v(Ht,{get each(){return Object.keys(n())},children:W=>(()=>{var b=Fe();return b.$$click=()=>d(W),et(b,W),b})()})),q}}),g),A.$$click=()=>{Ie(),t(!1)},rt(()=>g.open=i()),f})()]}Vt(["click"]);const Oe=document.getElementById("root");jt(()=>v(Ne,{}),Oe);
