(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const h of n)if(h.type==="childList")for(const a of h.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const h={};return n.integrity&&(h.integrity=n.integrity),n.referrerPolicy&&(h.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?h.credentials="include":n.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(n){if(n.ep)return;n.ep=!0;const h=e(n);fetch(n.href,h)}})();const Xt=(i,t)=>i===t,Ut=Symbol("solid-track"),dt={equals:Xt};let Dt=Wt;const O=1,gt=2,Gt={owned:null,cleanups:null,context:null,owner:null};var P=null;let bt=null,Kt=null,b=null,S=null,q=null,vt=0;function ft(i,t){const e=b,s=P,n=i.length===0,h=t===void 0?s:t,a=n?Gt:{owned:null,cleanups:null,context:h?h.context:null,owner:h},l=n?i:()=>i(()=>B(()=>xt(a)));P=a,b=null;try{return ot(l,!0)}finally{b=e,P=s}}function nt(i,t){t=t?Object.assign({},dt,t):dt;const e={value:i,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(e.value)),Nt(e,n));return[Lt.bind(e),s]}function pt(i,t,e){const s=At(i,t,!1,O);lt(s)}function Zt(i,t,e){Dt=te;const s=At(i,t,!1,O);(!e||!e.render)&&(s.user=!0),q?q.push(s):lt(s)}function F(i,t,e){e=e?Object.assign({},dt,e):dt;const s=At(i,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=e.equals||void 0,lt(s),Lt.bind(s)}function B(i){if(b===null)return i();const t=b;b=null;try{return i()}finally{b=t}}function C(i){Zt(()=>B(i))}function R(i){return P===null||(P.cleanups===null?P.cleanups=[i]:P.cleanups.push(i)),i}function Lt(){if(this.sources&&this.state)if(this.state===O)lt(this);else{const i=S;S=null,ot(()=>wt(this),!1),S=i}if(b){const i=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(i)):(b.sources=[this],b.sourceSlots=[i]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function Nt(i,t,e){let s=i.value;return(!i.comparator||!i.comparator(s,t))&&(i.value=t,i.observers&&i.observers.length&&ot(()=>{for(let n=0;n<i.observers.length;n+=1){const h=i.observers[n],a=bt&&bt.running;a&&bt.disposed.has(h),(a?!h.tState:!h.state)&&(h.pure?S.push(h):q.push(h),h.observers&&_t(h)),a||(h.state=O)}if(S.length>1e6)throw S=[],new Error},!1)),t}function lt(i){if(!i.fn)return;xt(i);const t=vt;Jt(i,i.value,t)}function Jt(i,t,e){let s;const n=P,h=b;b=P=i;try{s=i.fn(t)}catch(a){return i.pure&&(i.state=O,i.owned&&i.owned.forEach(xt),i.owned=null),i.updatedAt=e+1,qt(a)}finally{b=h,P=n}(!i.updatedAt||i.updatedAt<=e)&&(i.updatedAt!=null&&"observers"in i?Nt(i,s):i.value=s,i.updatedAt=e)}function At(i,t,e,s=O,n){const h={fn:i,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:P,context:P?P.context:null,pure:e};return P===null||P!==Gt&&(P.owned?P.owned.push(h):P.owned=[h]),h}function mt(i){if(i.state===0)return;if(i.state===gt)return wt(i);if(i.suspense&&B(i.suspense.inFallback))return i.suspense.effects.push(i);const t=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<vt);)i.state&&t.push(i);for(let e=t.length-1;e>=0;e--)if(i=t[e],i.state===O)lt(i);else if(i.state===gt){const s=S;S=null,ot(()=>wt(i,t[0]),!1),S=s}}function ot(i,t){if(S)return i();let e=!1;t||(S=[]),q?e=!0:q=[],vt++;try{const s=i();return Qt(e),s}catch(s){e||(q=null),S=null,qt(s)}}function Qt(i){if(S&&(Wt(S),S=null),i)return;const t=q;q=null,t.length&&ot(()=>Dt(t),!1)}function Wt(i){for(let t=0;t<i.length;t++)mt(i[t])}function te(i){let t,e=0;for(t=0;t<i.length;t++){const s=i[t];s.user?i[e++]=s:mt(s)}for(t=0;t<e;t++)mt(i[t])}function wt(i,t){i.state=0;for(let e=0;e<i.sources.length;e+=1){const s=i.sources[e];if(s.sources){const n=s.state;n===O?s!==t&&(!s.updatedAt||s.updatedAt<vt)&&mt(s):n===gt&&wt(s,t)}}}function _t(i){for(let t=0;t<i.observers.length;t+=1){const e=i.observers[t];e.state||(e.state=gt,e.pure?S.push(e):q.push(e),e.observers&&_t(e))}}function xt(i){let t;if(i.sources)for(;i.sources.length;){const e=i.sources.pop(),s=i.sourceSlots.pop(),n=e.observers;if(n&&n.length){const h=n.pop(),a=e.observerSlots.pop();s<n.length&&(h.sourceSlots[a]=s,n[s]=h,e.observerSlots[s]=a)}}if(i.owned){for(t=i.owned.length-1;t>=0;t--)xt(i.owned[t]);i.owned=null}if(i.cleanups){for(t=i.cleanups.length-1;t>=0;t--)i.cleanups[t]();i.cleanups=null}i.state=0}function ee(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function qt(i,t=P){throw ee(i)}const ie=Symbol("fallback");function Tt(i){for(let t=0;t<i.length;t++)i[t]()}function se(i,t,e={}){let s=[],n=[],h=[],a=0,l=t.length>1?[]:null;return R(()=>Tt(h)),()=>{let d=i()||[],u,f;return d[Ut],B(()=>{let m=d.length,y,x,k,A,M,$,D,_,j;if(m===0)a!==0&&(Tt(h),h=[],s=[],n=[],a=0,l&&(l=[])),e.fallback&&(s=[ie],n[0]=ft(Yt=>(h[0]=Yt,e.fallback())),a=1);else if(a===0){for(n=new Array(m),f=0;f<m;f++)s[f]=d[f],n[f]=ft(v);a=m}else{for(k=new Array(m),A=new Array(m),l&&(M=new Array(m)),$=0,D=Math.min(a,m);$<D&&s[$]===d[$];$++);for(D=a-1,_=m-1;D>=$&&_>=$&&s[D]===d[_];D--,_--)k[_]=n[D],A[_]=h[D],l&&(M[_]=l[D]);for(y=new Map,x=new Array(_+1),f=_;f>=$;f--)j=d[f],u=y.get(j),x[f]=u===void 0?-1:u,y.set(j,f);for(u=$;u<=D;u++)j=s[u],f=y.get(j),f!==void 0&&f!==-1?(k[f]=n[u],A[f]=h[u],l&&(M[f]=l[u]),f=x[f],y.set(j,f)):h[u]();for(f=$;f<m;f++)f in k?(n[f]=k[f],h[f]=A[f],l&&(l[f]=M[f],l[f](f))):n[f]=ft(v);n=n.slice(0,a=m),s=d.slice(0)}return n});function v(m){if(h[f]=m,l){const[y,x]=nt(f);return l[f]=x,t(d[f],y)}return t(d[f])}}}function p(i,t){return B(()=>i(t||{}))}const ne=i=>`Stale read from <${i}>.`;function re(i){const t="fallback"in i&&{fallback:()=>i.fallback};return F(se(()=>i.each,i.children,t||void 0))}function T(i){const t=i.keyed,e=F(()=>i.when,void 0,{equals:(s,n)=>t?s===n:!s==!n});return F(()=>{const s=e();if(s){const n=i.children;return typeof n=="function"&&n.length>0?B(()=>n(t?s:()=>{if(!B(e))throw ne("Show");return i.when})):n}return i.fallback},void 0,void 0)}function he(i,t,e){let s=e.length,n=t.length,h=s,a=0,l=0,d=t[n-1].nextSibling,u=null;for(;a<n||l<h;){if(t[a]===e[l]){a++,l++;continue}for(;t[n-1]===e[h-1];)n--,h--;if(n===a){const f=h<s?l?e[l-1].nextSibling:e[h-l]:d;for(;l<h;)i.insertBefore(e[l++],f)}else if(h===l)for(;a<n;)(!u||!u.has(t[a]))&&t[a].remove(),a++;else if(t[a]===e[h-1]&&e[l]===t[n-1]){const f=t[--n].nextSibling;i.insertBefore(e[l++],t[a++].nextSibling),i.insertBefore(e[--h],f),t[n]=e[h]}else{if(!u){u=new Map;let v=l;for(;v<h;)u.set(e[v],v++)}const f=u.get(t[a]);if(f!=null)if(l<f&&f<h){let v=a,m=1,y;for(;++v<n&&v<h&&!((y=u.get(t[v]))==null||y!==f+m);)m++;if(m>f-l){const x=t[a];for(;l<f;)i.insertBefore(e[l++],x)}else i.replaceChild(e[l++],t[a++])}else a++;else t[a++].remove()}}}const Ct="_$DX_DELEGATE";function ae(i,t,e,s={}){let n;return ft(h=>{n=h,t===document?i():ut(t,i(),t.firstChild?null:void 0,e)},s.owner),()=>{n(),t.textContent=""}}function E(i,t,e){let s;const n=()=>{const a=document.createElement("template");return a.innerHTML=i,e?a.content.firstChild.firstChild:a.content.firstChild},h=t?()=>B(()=>document.importNode(s||(s=n()),!0)):()=>(s||(s=n())).cloneNode(!0);return h.cloneNode=h,h}function le(i,t=window.document){const e=t[Ct]||(t[Ct]=new Set);for(let s=0,n=i.length;s<n;s++){const h=i[s];e.has(h)||(e.add(h),t.addEventListener(h,ce))}}function oe(i,t,e){return B(()=>i(t,e))}function ut(i,t,e,s){if(e!==void 0&&!s&&(s=[]),typeof t!="function")return yt(i,t,s,e);pt(n=>yt(i,t(),n,e),s)}function ce(i){const t=`$$${i.type}`;let e=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==e&&Object.defineProperty(i,"target",{configurable:!0,value:e}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return e||document}});e;){const s=e[t];if(s&&!e.disabled){const n=e[`${t}Data`];if(n!==void 0?s.call(e,n,i):s.call(e,i),i.cancelBubble)return}e=e._$host||e.parentNode||e.host}}function yt(i,t,e,s,n){for(;typeof e=="function";)e=e();if(t===e)return e;const h=typeof t,a=s!==void 0;if(i=a&&e[0]&&e[0].parentNode||i,h==="string"||h==="number")if(h==="number"&&(t=t.toString()),a){let l=e[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),e=z(i,e,s,l)}else e!==""&&typeof e=="string"?e=i.firstChild.data=t:e=i.textContent=t;else if(t==null||h==="boolean")e=z(i,e,s);else{if(h==="function")return pt(()=>{let l=t();for(;typeof l=="function";)l=l();e=yt(i,l,e,s)}),()=>e;if(Array.isArray(t)){const l=[],d=e&&Array.isArray(e);if(St(l,t,e,n))return pt(()=>e=yt(i,l,e,s,!0)),()=>e;if(l.length===0){if(e=z(i,e,s),a)return e}else d?e.length===0?Rt(i,l,s):he(i,e,l):(e&&z(i),Rt(i,l));e=l}else if(t.nodeType){if(Array.isArray(e)){if(a)return e=z(i,e,s,t);z(i,e,null,t)}else e==null||e===""||!i.firstChild?i.appendChild(t):i.replaceChild(t,i.firstChild);e=t}}return e}function St(i,t,e,s){let n=!1;for(let h=0,a=t.length;h<a;h++){let l=t[h],d=e&&e[i.length],u;if(!(l==null||l===!0||l===!1))if((u=typeof l)=="object"&&l.nodeType)i.push(l);else if(Array.isArray(l))n=St(i,l,d)||n;else if(u==="function")if(s){for(;typeof l=="function";)l=l();n=St(i,Array.isArray(l)?l:[l],Array.isArray(d)?d:[d])||n}else i.push(l),n=!0;else{const f=String(l);d&&d.nodeType===3&&d.data===f?i.push(d):i.push(document.createTextNode(f))}}return n}function Rt(i,t,e=null){for(let s=0,n=t.length;s<n;s++)i.insertBefore(t[s],e)}function z(i,t,e,s){if(e===void 0)return i.textContent="";const n=s||document.createTextNode("");if(t.length){let h=!1;for(let a=t.length-1;a>=0;a--){const l=t[a];if(n!==l){const d=l.parentNode===i;!h&&!a?d?i.replaceChild(n,l):i.insertBefore(n,e):d&&l.remove()}else h=!0}}else i.insertBefore(n,e);return[n]}var fe=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},Ft;typeof window<"u"&&(typeof Promise<"u"?Ft=new Promise(function(i){return window.addEventListener("load",i)}):Ft={then:function(i){return window.addEventListener("load",i)}});function ue(i,t){t===void 0&&(t={});var e=t.registrationOptions;e===void 0&&(e={}),delete t.registrationOptions;var s=function(n){for(var h=[],a=arguments.length-1;a-- >0;)h[a]=arguments[a+1];t&&t[n]&&t[n].apply(t,h)};"serviceWorker"in navigator&&Ft.then(function(){fe()?(de(i,s,e),navigator.serviceWorker.ready.then(function(n){s("ready",n)}).catch(function(n){return rt(s,n)})):(Bt(i,s,e),navigator.serviceWorker.ready.then(function(n){s("ready",n)}).catch(function(n){return rt(s,n)}))})}function rt(i,t){navigator.onLine||i("offline"),i("error",t)}function Bt(i,t,e){navigator.serviceWorker.register(i,e).then(function(s){if(t("registered",s),s.waiting){t("updated",s);return}s.onupdatefound=function(){t("updatefound",s);var n=s.installing;n.onstatechange=function(){n.state==="installed"&&(navigator.serviceWorker.controller?t("updated",s):t("cached",s))}}}).catch(function(s){return rt(t,s)})}function de(i,t,e){fetch(i).then(function(s){s.status===404?(t("error",new Error("Service worker not found at "+i)),It()):s.headers.get("content-type").indexOf("javascript")===-1?(t("error",new Error("Expected "+i+" to have javascript content-type, but received "+s.headers.get("content-type"))),It()):Bt(i,t,e)}).catch(function(s){return rt(t,s)})}function It(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){i.unregister()}).catch(function(i){return rt(emit,i)})}class o{constructor(t,e){this.x=t,this.y=e}static random2D(){const t=new o(Math.random()*200-100,Math.random()*200-100);return t.normalize(),t}static add(t,e){const s=new o(t.x,t.y);return s.add(e),s}static sub(t,e){const s=new o(t.x,t.y);return s.sub(e),s}static mult(t,e){const s=new o(t.x,t.y);return s.mult(e),s}static div(t,e){let s=new o(t.x,t.y);return s.div(e),s}static normalize(t){let e=new o(t.x,t.y);return e.normalize(),e}set(t,e){this.x=t,this.y=e}clone(){return new o(this.x,this.y)}add(t){this.x+=t.x,this.y+=t.y}sub(t){this.x-=t.x,this.y-=t.y}mult(t){this.x*=t,this.y*=t}div(t){this.x/=t,this.y/=t}dist(t){let e=t.clone();return e.sub(this),e.mag()}mag(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}setMag(t){this.normalize(),this.mult(t)}limit(t){this.mag()>t&&this.setMag(t)}normalize(){let t=this.mag();t!==0&&this.mult(1/t)}setHeading(t){let e=this.mag();this.x=Math.sin(t)*e,this.y=Math.cos(t)*e}heading(){return Math.atan2(this.x,this.y)}rotate(t){let e=this.heading()+t;this.setHeading(e)}dot(t){let e=t.x,s=t.y;return t.z,this.x*(e||0)+this.y*(s||0)}}let c=null,r=null,g;function ge(i){c=i,c.width=window.innerWidth,c.height=window.innerHeight,r=c.getContext("2d"),g=new o(c.width/2,c.height/2),console.log("canvas registered...")}function H(i="#000"){r.fillStyle=i,r.beginPath(),r.fillRect(0,0,c.width,c.height),r.fill(),r.closePath()}function $t(i,t,e,s="magenta"){r.beginPath(),r.fillStyle=s,r.arc(i,t,e,0,2*Math.PI,!0),r.fill()}function pe(i,t,e,s="yellow"){r.beginPath(),r.fillStyle=s,r.moveTo(i,t-e),r.lineTo(i+e,t+e),r.lineTo(i-e,t+e),r.fill(),r.closePath(),r.beginPath(),r.fillStyle=s,r.moveTo(i,t+e+e/3),r.lineTo(i-e,t-e+e/3),r.lineTo(i+e,t-e+e/3),r.fill(),r.closePath()}let L=0,N=0,W=!1;function me(){console.log("mouse registered"),c.onmousemove=i=>{L=i.clientX,N=i.clientY},c.onpointermove=i=>{L=i.clientX,N=i.clientY},c.onmousedown=i=>{W=!0,L=i.clientX,N=i.clientY},c.onmouseup=i=>{W=!1,L=i.clientX,N=i.clientY},c.onpointerdown=i=>{W=!0,L=i.clientX,N=i.clientY},c.onpointerup=i=>{W=!1,L=i.clientX,N=i.clientY}}function we(i,t,e){const n=(t-i)/e;console.log(n);const h=[];let a=0;for(let l=0;l<e;l++)h.push(a),a+=n;return h}function ht(i,t,e){return i>=e&&(i=e),i<=t&&(i=t),i}function w(i,t=0){return t===0?Math.random()*i:i+Math.random()*t}function ye(i,t,e){return(i-t)/(e-t)}function Ot(i,t,e){return(e-t)*i+t}function ve(i,t,e,s,n){let h=ye(i,t,e);return Ot(h,s,n)}function xe(i){const t=new Map;return function(...e){let s=e.length+e.join("+");if(t.has(s))return t.get(s);{let n=i.apply(this,e);return t.set(s,n),n}}}function be(i,t){for(i<t&&([i,t]=[t,i]);t!==0;)[i,t]=[t,i%t];return i}const Pe=xe(be);class at{constructor(t,e,s){this.pos=new o(t,e),this.r=Math.sqrt(s)*1.2,this.mass=s,this.vel=o.random2D(),this.vel.setMag(Math.random()*.01+.01),this.acc=new o(0,0)}edges(){this.pos.y>=c.height-this.r&&(this.pos.y=c.height-this.r,this.vel.y*=-1),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.x*=-1),this.pos.x>=c.width-this.r&&(this.pos.x=c.width-this.r,this.vel.x*=-1)}contact(){return c.height-(this.pos.y+this.r)<1}friction(){if(this.contact()){let t=o.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=o.normalize(this.vel);t.mult(-1);let e=2,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}attract(t){let e=o.sub(this.pos,t.pos),s=e.mag(),n=s*s;n=ht(n,100,1e3);let a=1*(this.mass*t.mass)/n;e.setMag(a),t.applyForce(e)}applyForce(t){let e=o.div(t,this.mass);this.acc.add(e)}update(){this.vel.add(this.acc),this.pos.add(this.vel),this.acc.set(0,0)}draw(){r.beginPath(),r.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI,!0),this.contact()?r.fillStyle="#f005":r.fillStyle="#0f05",r.fill(),r.closePath()}}class Me{constructor(t,e,s){this.pos=new o(t,e),this.color="#0aa5",this.r=Math.sqrt(s)*10,this.mass=s,this.vel=new o(0,0),this.acc=new o(0,0)}edges(){this.pos.y>=c.height-this.r&&(this.pos.y=c.height-this.r,this.vel.y*=-1),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.y*=-1),this.pos.x>=c.width-this.r&&(this.pos.x=c.width-this.r,this.vel.x*=-1)}contact(){return c.height-(this.pos.y+this.r)<1}friction(){if(this.contact()){let t=o.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=o.normalize(this.vel);t.mult(-1);let e=.01,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}applyForce(t){let e=o.div(t,this.mass);this.acc.add(e)}attract(t){let e=o.sub(this.pos,t.pos),s=e.mag(),n=s*s;n=ht(n,100,400);let a=5*(this.mass*t.mass)/n;e.setMag(a),t.applyForce(e)}update(){this.vel.add(this.acc),this.vel.limit(25),this.pos.add(this.vel)}draw(){r.beginPath(),r.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI,!0),this.contact()?r.fillStyle="#f005":r.fillStyle=this.color,r.fill(),r.closePath()}}let Se=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.players=[],this.attractor=new Me(c.width/2,c.height/3.5,18),this.actor=new at(c.width*.3,c.height*.3,3);for(let t=0;t<20;t++)this.players.push(new at(Math.random()*c.width,40,12+Math.random()*15))}update(){let t=new o(0,.09),e=new o(.09,0);this.actor.update(),this.attractor.attract(this.actor),this.players.forEach((s,n)=>{s.applyForce(o.mult(t,s.mass)),W&&(console.log("wind"),s.applyForce(e)),s.pos.y>c.height*.55&&s.drag(),s.update(),s.edges(),n>10&&this.attractor.attract(s)})}draw(){r.fillStyle="#00000004",r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath(),r.fillStyle="#00a1",r.beginPath(),r.fillRect(0,this.height*.55,this.width,this.height),r.fill(),r.closePath(),this.attractor.draw(),this.actor.draw(),this.players.forEach(t=>{t.draw()})}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},V;function Fe(){return C(()=>{V=new Se,V.run=!0,V.animate()}),R(()=>{V.run=!1,V.animate=()=>{},V=""}),[]}class Ae{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.movers=[];let t=new o(this.width/2,this.height/2);for(let e=0;e<300;e++){let s=o.random2D();s.setMag(100+w(50)),s.add(t);let n=s.x,h=s.y;this.movers.push(new at(n,h,5))}}update(){this.movers.forEach(t=>{for(let e of this.movers)t!==e&&t.attract(e);t.update()})}draw(){this.background("#066a"),this.movers.forEach(t=>{t.draw()})}background(t="#000"){r.fillStyle=t,r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}}var $e=E("<div>");let Y;function Ee(){return C(()=>{Y=new Ae,Y.run=!0,Y.animate()}),R(()=>{Y.run=!1,Y=""}),$e()}class Ht{constructor(t,e,s){this.pos=new o(t,e),this.r=Math.sqrt(s)*4,this.mass=s,this.vel=o.random2D(),this.vel.setMag(Math.random()*.01+.01),this.acc=new o(0,0)}edges(){this.pos.y>=c.height-this.r&&(this.pos.y=c.height-this.r,this.vel.y*=-1,console.log("edge")),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.x*=-1,console.log("edge")),this.pos.x>=c.width-this.r&&(this.pos.x=c.width-this.r,this.vel.x*=-1,console.log("edge")),this.pos.y<=0+this.r&&(this.pos.y=0+this.r,this.vel.y*=-1,console.log("edge"))}contact(){return c.height-(this.pos.y+this.r)<1}friction(){if(this.contact()){let t=o.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=o.normalize(this.vel);t.mult(-1);let e=2,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}detract(t){let e=o.sub(this.pos,t.pos);if(e.mag()>40)return;e.mult(-1);let s=e.mag(),n=s*s,a=.7*(this.mass*t.mass)/n;e.setMag(a),t.applyForce(e)}attract(t){let e=o.sub(this.pos,t.pos),s=e.mag(),n=s*s,a=.1*(this.mass*t.mass)/n;e.setMag(a),t.applyForce(e)}applyForce(t){let e=o.div(t,this.mass);this.acc.add(e),this.dir=this.acc.heading()}update(){this.vel.add(this.acc),this.pos.add(this.vel),this.acc.set(0,0)}draw(){r.translate(this.pos.x,this.pos.y);let t=new o(-this.r,-this.r),e=new o(this.r,-this.r),s=new o(0,this.r*2),n=this.vel.heading();t.rotate(n),e.rotate(n),s.rotate(n),r.beginPath(),r.moveTo(t.x,t.y),r.lineTo(e.x,e.y),r.lineTo(s.x,s.y),r.lineTo(t.x,t.y),this.contact()?r.fillStyle="#f005":r.fillStyle="#000",r.fill(),r.closePath(),r.translate(-this.pos.x,-this.pos.y)}}var ke=E("<div>");let Te=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.sun=new at(this.width/2,this.height/2,30),this.movers=[],this.angleI=0;let t=new o(this.width/2,this.height/2);for(let e=0;e<Math.PI*2;e+=1){let s=o.random2D();s.setMag(100),s.setHeading(e),s.add(t);let n=s.x,h=s.y;this.movers.push(new Ht(n,h,25))}this.moon=new at(200,200,100),console.log("before",this.moon),console.log(2*Math.PI),console.log("heading before",this.moon.pos.heading()),this.moon.pos.setHeading(0),console.log(this.moon.pos.heading())}update(){this.movers.forEach(t=>{this.sun.attract(t);for(let s of this.movers)t!==s&&t.detract(s);t.update();let e=Ot(this.angleI,0,2*Math.PI);this.moon.pos.setHeading(e),this.angleI+=1e-4})}draw(){r.reset(),this.background("#e00a"),this.movers.forEach(t=>{t.draw()}),this.sun.draw(),this.moon.draw()}background(t="#000"){r.fillStyle=t,r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},X;function Ce(){return C(()=>{X=new Te,X.run=!0,X.animate()}),R(()=>{X.run=!1,X=""}),ke()}class Re{constructor(t,e,s){this.pos=new o(t,e),this.vel=o.random2D(),this.vel.setMag(5)}update(){this.pos.add(this.vel)}draw(){let t=new o(0,20);t.setHeading(0),t.setHeading(this.vel.heading()),r.strokeStyle="yellow",r.lineWidth=7,r.moveTo(this.pos.x,this.pos.y),r.lineTo(this.pos.x+t.x,this.pos.y+t.y),r.stroke()}}var Ie=E("<div>");let De=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.caprot=new Re(200,300),this.max=0,this.angleMax=0,this.spiralR=190}update(){this.caprot.update(),o.sub(g,this.caprot.pos).mag()>500&&(this.caprot.pos.set(g.x,g.y),this.caprot.vel=o.random2D(),this.caprot.vel.setMag(4))}draw(){this.background("#00000005"),this.caprot.draw(),r.strokeStyle="magenta",r.lineWidth=4,r.beginPath(),r.arc(g.x,g.y,100,0,2*Math.PI,!0),r.stroke(),r.closePath(),this.dotsOnCircle(),this.angleMax+=.09,this.spiralR-=.19,this.spiralR<=100&&(this.spiralR=190);let t=new o(200,0),e=Math.cos(this.angleMax)*this.spiralR,s=Math.sin(this.angleMax)*this.spiralR;this.dot(g.x+e,g.y+s),r.beginPath(),r.strokeStyle="lightgreen",r.lineWidth=1,t.setHeading(0),r.moveTo(g.x+t.x,g.y+t.y);for(let n=0;n<2*Math.PI;n+=.001)t.setHeading(n),r.lineTo(g.x+t.x,g.y+t.y);r.closePath(),r.stroke()}dotsOnCircle(){this.max<Math.PI*2&&(this.max+=.1),this.max>=Math.PI*2&&(this.max=0);let t=new o(100,0);for(let e=0;e<this.max;e+=2*Math.PI/12)t.setHeading(e),this.dot(g.x+t.x,g.y+t.y)}dot(t,e){r.fillStyle="yellow",r.beginPath(),r.arc(t,e,4,0,Math.PI*2,!0),r.fill(),r.closePath()}background(t="#000"){r.fillStyle=t,r.beginPath(),r.fillRect(0,0,this.width,this.height),r.fill(),r.closePath()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},U;function Ge(){return C(()=>{U=new De,U.run=!0,U.animate()}),R(()=>{U.run=!1,U=""}),Ie()}class Le{constructor(t,e,s){this.amplitude=t,this.period=e,this.phase=s}calculate(t){return Math.sin(this.phase+2*Math.PI*t/this.period)*this.amplitude}calculateAudio(t){return Math.sin(2*Math.PI*t/this.period)}}var Ne=E("<div>");let We=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.audioCtx=null;var t={audio:!0};navigator.mediaDevices.getUserMedia(t).then(e=>{this.audioCtx=new(window.AudioContext||window.webkitAudioContext)}),this.waves=[],this.makeRandomWaves(),this.lockMouse=!1}makeRandomWaves(){this.waves=[];for(let t=0;t<7;t++)this.waves.push(new Le(w(this.height/28,this.height/15),w(this.width/8,this.width),w(0,2*Math.PI)))}async playSound(){const t=this.audioCtx.createBuffer(2,this.audioCtx.sampleRate*3,this.audioCtx.sampleRate);let e=this.getRamp(t.length),s=this.getRamp(t.length);s.reverse();for(let h=0;h<t.numberOfChannels;h++){console.log(t.length);const a=t.getChannelData(h);for(let l=0;l<t.length;l++){let d=l,u=0;this.waves.forEach(v=>{u+=v.calculateAudio(d),u*=.5}),l<e.length&&(u*=e[l]);let f=t.length*.5;l>f&&(u*=s[l-f]),a[l]=u}}this.audioCtx.resume();const n=this.audioCtx.createBufferSource();n.buffer=t,n.connect(this.audioCtx.destination),n.start()}getRamp(t){let e=t*.5,s=we(.4,1,e);return console.log(s),s}update(){W&&this.lockMouse===!1&&(this.makeRandomWaves(),this.playSound(),this.lockMouse=!0,setTimeout(()=>this.lockMouse=!1,300))}draw(){H("#00000022");for(let t=0;t<this.width;t+=.5){let e=0;this.waves.forEach(s=>{e+=s.calculate(t)}),$t(t,g.y+e,3,"magenta")}this.waves.forEach(t=>t.phase+=.1)}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},K;function _e(){return C(()=>{K=new We,K.run=!0,K.animate()}),R(()=>{K.run=!1,K=""}),Ne()}var qe=E("<div>");let Be=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.lockMouse=!1,this.restLength=100,this.k=.08,this.velocity=new o(0,0),this.gravity=new o(0,4),this.anchor=new o(g.x,g.y/3),this.bob=new o(g.x,g.y*.8)}update(){W&&(this.bob.x=L,this.bob.y=N,this.velocity.set(0,0));let t=o.sub(this.bob,this.anchor),e=t.mag()-this.restLength;t.normalize(),t.mult(-1*this.k*e),this.velocity.add(t),this.velocity.add(this.gravity),this.bob.add(this.velocity),this.velocity.mult(.94)}draw(){H("#0a0"),r.fillStyle="#010",r.beginPath(),r.arc(this.anchor.x,this.anchor.y,25,0,Math.PI*2),r.arc(this.bob.x,this.bob.y,25,0,Math.PI*2),r.fill(),r.strokeStyle="#010",r.beginPath(),r.moveTo(this.anchor.x,this.anchor.y),r.lineTo(this.bob.x,this.bob.y),r.stroke()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},Z;function Oe(){return C(()=>{Z=new Be,Z.run=!0,Z.animate()}),R(()=>{Z.run=!1,Z=""}),qe()}class Et{constructor(t,e){this.pos=new o(t,e),this.vel=o.random2D(),this.vel.setMag(3),this.acc=new o(0,0),this.r=9,this.lifetime=255,this.finished=!1,this.bounce=-.7,this.color={r:255,g:105,b:0},this.gravity=new o(0,.5)}contact(){return c.height-(this.pos.y+this.r)<1}edges(){this.pos.y>=c.height-this.r&&(this.pos.y=c.height-this.r,this.vel.y*=this.bounce),this.pos.x<=0+this.r&&(this.pos.x=this.r,this.vel.x*=this.bounce),this.pos.x>=c.width-this.r&&(this.pos.x=c.width-this.r,this.vel.x*=this.bounce)}friction(){if(this.contact()){let t=o.normalize(this.vel);t.mult(-1);let e=.01,s=this.mass;t.setMag(e*s),this.applyForce(t)}}drag(){let t=o.normalize(this.vel);t.mult(-1);let e=2,s=this.vel.mag();t.setMag(e*s*s),this.applyForce(t)}attract(t){let e=o.sub(this.pos,t.pos),s=e.mag(),n=s*s;n=ht(n,100,1e3);let a=1*(this.mass*t.mass)/n;e.setMag(a),t.applyForce(e)}applyForce(t){let e=o.div(t,1);this.acc.add(e)}update(){this.applyForce(this.gravity),this.vel.add(this.acc),this.pos.add(this.vel),this.acc.set(0,0),this.lifetime-=5,this.lifetime<=0&&(this.finished=!0)}draw(){let t=`rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, ${this.lifetime/255})`;pe(this.pos.x,this.pos.y,this.r,t)}}class He extends Et{constructor(t,e){super(t,e),this.vel.y=-w(0,7),this.color={r:255,g:255,b:0},this.gravity=new o(0,0),this.r=w(1,4),this.lifetime=w(300,900)}}class je extends Et{constructor(t,e){t+=w(15),e+=w(15),super(t,e),this.lifetime=255+w(300),this.image=new Image,this.vel=o.random2D(),this.vel.setMag(w(.001,.3)),this.image.src="/demo-game/texture.png",this.size=15,this.gravity=new o(0,.01)}draw(){r.save(),r.globalAlpha=this.lifetime/255,r.drawImage(this.image,this.pos.x,this.pos.y,this.size,this.size),r.restore()}}class ze{constructor(t,e){this.pos=new o(t,e),this.lastFire=0,this.particles=[];for(let s=0;s<10;s++)this.addParticles()}addParticles(t=this.pos.x,e=this.pos.y){Date.now()-this.lastFire>1e3&&this.particles.push(new je(t,e));let h=new Et(t,e);w(10)>8&&(h=new He(t,e),console.log("adding spark instead")),this.particles.push(h)}update(){this.particles.forEach(t=>{t.update(),t.edges(),t.finished&&(this.particles=this.particles.filter(e=>e!==t))})}draw(){this.particles.forEach(t=>{t.draw()})}}var Ve=E("<div>");let Ye=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.particleSystem=new ze(g.x,g.y)}update(){W&&this.particleSystem.addParticles(L,N),this.particleSystem.update()}draw(){H("#000"),this.particleSystem.draw()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},J;function Xe(){return C(()=>{J=new Ye,J.run=!0,J.animate()}),R(()=>{J.run=!1,J=""}),Ve()}function Ue(i,t,e){let s=o.sub(t,i),n=o.sub(e,i);n.normalize();let h=s.dot(n);return n.mult(h),n.add(i),n}class kt extends Ht{constructor(t,e){super(t,e,4),this.vel=o.random2D(),this.acc=new o(0,0),this.vel.setMag(4),this.size=16,this.maxSpeed=2,this.maxForce=.55,this.points=[],this.color="yellow",this.wanderTheta=0,this.wanderPoint=new o(0,0),this.path=[],this.count=0,this.showPath=!1}follow(t){let e=this.vel.clone();e.mult(20);let s=Ue(t.start,e,t.end);return e.dist(s)>t.r?this.seek(s):new o(0,0)}getShape(){return[new o(-this.size,-this.size),new o(this.size,-this.size),new o(-0,this.size)]}wander(){this.wanderPoint=this.vel.clone(),this.wanderPoint.setMag(100),this.wanderPoint.add(this.pos);let t=50,e=this.wanderTheta+this.vel.heading(),s=t*Math.cos(e),n=t*Math.sin(e);this.wanderPoint.add(new o(s,n));let h=o.sub(this.wanderPoint,this.pos);h.setMag(this.maxForce),this.applyForce(h);let a=.3;this.wanderTheta+=w(-a,a)}flee(t){let e=this.seek(t);return e.mult(-1),e}seek(t){let e=o.sub(t,this.pos);return e.setMag(this.maxSpeed),e.sub(this.vel),e.limit(this.maxForce),e}arrive(t){let e=100,s=o.sub(t,this.pos),n=s.mag();if(n<e){let h=ve(n,0,e,0,this.maxSpeed);s.setMag(h)}else s.setMag(this.maxSpeed);return s.sub(this.vel),s.limit(this.maxForce),s}pursue(t){let e=t.pos.clone(),s=t.vel.clone();return s.mult(10),e.add(s),this.seek(e)}evade(t){let e=this.pursue(vehilce);return e.mult(-1),e}applyForce(t){this.acc.add(t)}update(){this.count++,this.vel.add(this.acc),this.vel.limit(this.maxSpeed),this.acc.set(0,0),this.pos.add(this.vel);let t=this.vel.heading(),e=this.getShape();this.points=e.map(s=>(s.rotate(t),s)),this.showPath&&(this.count>3&&(this.path.push({x:this.pos.x,y:this.pos.y}),this.count=0),this.path.length>30&&this.path.shift())}draw(){r.beginPath(),r.fillStyle=this.color,r.moveTo(this.pos.x+this.points[0].x,this.pos.y+this.points[0].y),r.lineTo(this.pos.x+this.points[1].x,this.pos.y+this.points[1].y),r.lineTo(this.pos.x+this.points[2].x,this.pos.y+this.points[2].y),r.closePath(),r.fill(),$t(this.wanderPoint.x,this.wanderPoint.y,5,"yellow"),this.showPath&&this.path.length>3&&this.drawPath()}drawPath(){r.beginPath(),r.moveTo(this.path[0].x,this.path[0].y),r.strokeStyle="white",r.lineWidth=2;for(let t=1;t<this.path.length-2;t+=2){let e=this.path[t],s=this.path[t+1];r.lineTo(e.x,e.y),r.lineTo(s.x,s.y)}r.stroke()}}class Ke extends kt{constructor(t,e){super(t,e),this.maxSpeed=3,this.maxForce=.35,this.color="green"}}var Ze=E("<div>");let Je=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.target=new Ke(g.x+w(g.x),g.y+w(g.y)),this.target.showPath=!0,this.enemy=new o(g.x+w(g.x),g.y+w(g.y)),this.boid=new kt(160,160),this.boid.showPath=!0}update(){if(console.log(this.target.pos.dist(this.boid.pos)),this.target.pos.dist(this.boid.pos)<80){let e=this.target.flee(this.boid.pos);this.target.applyForce(e)}else this.target.wander();let t=this.boid.arrive(this.target.pos);this.boid.applyForce(t),this.boid.update(),this.target.update(),this.boid.pos.dist(this.target.pos)<this.boid.size+this.target.size*1.4&&(this.target.pos.x=w(0,this.width),this.target.pos.y=w(0,this.height),console.log("yes")),this.target.edges()}draw(){H("#000"),this.target.draw(),$t(this.enemy.x,this.enemy.y,16,"red"),this.boid.draw()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},Q;function Qe(){return C(()=>{Q=new Je,Q.run=!0,Q.animate()}),R(()=>{Q.run=!1,Q=""}),Ze()}class ti{constructor(){this.cell=2,this.width=Math.floor(c.width/this.cell),this.height=Math.floor(c.height/this.cell),this.field=this.getArray(),this.field[10][5]=1,this.hue=1}getArray(){let t=[];for(let e=0;e<this.height;e++){t[e]=[];for(let s=0;s<this.width;s++)t[e][s]=0}return t}isFree(t,e){return!!(this.field[t]&&this.field[t][e]!==void 0&&this.field[t][e]===0)}pourSand(t,e){if(!(t-5>0&&t+5<c.width&&e-5>0&&e+5<c.height))return;let s=Math.floor(e/this.cell),n=Math.floor(t/this.cell);for(let h=0;h<5;h++)for(let a=0;a<5;a++)w(1)>.75&&(this.field[s+a][n+h]=this.hue);this.hue+=1,this.hue>360&&(this.hue=1)}update(){const t=()=>{let s=1;return Math.random()>.5&&(s*=-1),s};let e=this.getArray();this.field.forEach((s,n)=>{s.forEach((h,a)=>{let l=t();h>0&&(this.isFree(n+1,a)?e[n+1][a]=h:this.isFree(n+1,a+l)?e[n+1][a+l]=h:this.isFree(n+1,a+-l)?e[n+1][a+-l]=h:e[n][a]=h)})}),this.field=e}draw(){let t=this.cell;this.field.forEach((e,s)=>{e.forEach((n,h)=>{n>=1&&(r.beginPath(),r.fillStyle=`hsl(${n}, 100%, 50%)`,r.rect(h*t,s*t,this.cell,this.cell),r.fill())})})}}var ei=E("<div>");let ii=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.sands=new ti}update(){this.sands.update(),W&&this.sands.pourSand(L,N)}draw(){H("#000"),this.sands.draw()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},tt;function si(){return C(()=>{tt=new ii,tt.run=!0,tt.animate()}),R(()=>{tt.run=!1,tt=""}),ei()}const jt=4,ct=1<<jt,zt=8,ni=1<<zt,G=4095;let ri=4,hi=.5;const Pt=i=>.5*(1-Math.cos(i*Math.PI));let I;const Vt=function(i,t=0,e=0){if(I==null){I=new Array(G+1);for(let A=0;A<G+1;A++)I[A]=Math.random()}i<0&&(i=-i),t<0&&(t=-t),e<0&&(e=-e);let s=Math.floor(i),n=Math.floor(t),h=Math.floor(e),a=i-s,l=t-n,d=e-h,u,f,v=0,m=.5,y,x,k;for(let A=0;A<ri;A++){let M=s+(n<<jt)+(h<<zt);u=Pt(a),f=Pt(l),y=I[M&G],y+=u*(I[M+1&G]-y),x=I[M+ct&G],x+=u*(I[M+ct+1&G]-x),y+=f*(x-y),M+=ni,x=I[M&G],x+=u*(I[M+1&G]-x),k=I[M+ct&G],k+=u*(I[M+ct+1&G]-k),x+=f*(k-x),y+=Pt(d)*(x-y),v+=y*m,m*=hi,s<<=1,a*=2,n<<=1,l*=2,h<<=1,d*=2,a>=1&&(s++,a--),l>=1&&(n++,l--),d>=1&&(h++,d--)}return v};var ai=E("<div>");let li=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,H("#000"),this.xoff=0,this.yoff=0,this.done=!1,this.imageData=r.createImageData(this.width,this.height),this.delta=10}update(){if(!this.done){for(let t=this.yoff;t<c.height+this.yoff;t+=1)for(let e=this.xoff;e<c.width+this.xoff;e+=1){let s=Math.floor(Vt(e/100,t/100)*255);const n=(e-this.xoff+(t-this.yoff)*c.width)*4;this.imageData.data[n]=s,this.imageData.data[n+1]=s,this.imageData.data[n+2]=s,this.imageData.data[n+3]=255}this.delta+=.015,this.xoff+=3,this.yoff+=3}}draw(){r.reset(),r.putImageData(this.imageData,0,0)}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},et;function oi(){return C(()=>{et=new li,et.run=!0,et.animate()}),R(()=>{et.run=!1,et=""}),ai()}class ci{constructor(t,e,s,n){this.start=new o(t,e),this.end=new o(s,n),this.r=20}draw(){r.beginPath(),r.strokeStyle="white",r.lineWidth=1,r.moveTo(this.start.x,this.start.y),r.lineTo(this.end.x,this.end.y),r.stroke(),r.beginPath(),r.strokeStyle="#fff1",r.lineWidth=this.r*2,r.moveTo(this.start.x,this.start.y),r.lineTo(this.end.x,this.end.y),r.stroke()}}var fi=E("<div>");let ui=class{constructor(){this.run=!1,this.width=c.width,this.height=c.height,this.boid=new kt(w(this.width),w(this.height)),this.path=new ci(0,g.y,this.width,g.y)}update(){let t=this.boid.follow(this.path);this.boid.applyForce(t),this.boid.update()}draw(){H("#000"),this.boid.draw(),r.beginPath(),this.path.draw()}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}},it;function di(){return C(()=>{it=new ui,it.run=!0,it.animate()}),R(()=>{it.run=!1,it=""}),fi()}class gi{constructor(t,e,s){this.width=t,this.height=e,this.scl=s,this.rows=Math.floor(e/s),this.cols=Math.floor(t/s),this.xoff=0,this.yoff=0,this.inc=.1,this.field=[]}makeFlowField(t){this.yoff=0;for(let e=0;e<this.rows;e+=1){this.field[e]=[],this.xoff=0;for(let s=0;s<this.cols;s+=1){let n=new o(this.scl,0);n.setHeading(Math.PI*2*Vt(this.xoff,this.yoff,t)),this.field[e][s]=n,this.xoff+=this.inc}this.yoff+=this.inc}}getFlowVector(t,e){let s=Math.floor(t/this.scl),n=Math.floor(e/this.scl);return s=ht(s,0,this.cols-1),n=ht(n,0,this.rows-1),this.field[n][s]}}class pi{constructor(){this.pos=new o(w(c.width),w(c.height)),this.vel=o.random2D(),this.acc=new o(0,0)}update(){this.vel.add(this.acc),this.vel.limit(2),this.pos.add(this.vel),this.acc.set(0,0)}addForce(t){this.acc.add(t)}checkField(t){let e=t.getFlowVector(this.pos.x,this.pos.y).clone();e.setMag(.1),this.addForce(e)}edges(){this.pos.x>c.width&&(this.pos.x=0),this.pos.x<0&&(this.pos.x=c.width),this.pos.y>c.height&&(this.pos.y=0),this.pos.y<0&&(this.pos.y=c.height)}draw(){r.fillStyle="#f6008a0f",r.fillRect(this.pos.x,this.pos.y,1,1),r.fill}}var mi=E("<div>");class wi{constructor(){this.run=!1,this.width=c.width,this.height=c.height,H("#000"),this.xoff=0,this.yoff=0,this.inc=.1,this.done=!1,this.zoff=0;let t=Pe(this.width,this.height);console.log(t),this.flowField=new gi(this.width,this.height,35),this.zoff=0,this.flowField.makeFlowField(this.zoff),this.lastTime=0,this.particles=[];for(let e=0;e<100;e++)this.particles.push(new pi)}update(){W&&console.log(this.flowField.getFlowVector(L,N)),Date.now()>this.lastTime+1e3&&(this.lastTime=Date.now(),this.zoff+=.1,this.flowField.makeFlowField(this.zoff)),this.particles.forEach(t=>{t.update(),t.edges(),t.checkField(this.flowField)});for(let t=this.yoff;t<c.height+this.yoff;t+=1)for(let e=this.xoff;e<c.width+this.xoff;e+=1);}draw(){this.particles.forEach(t=>{t.draw()})}animate(){this.update(),this.draw(),this.run&&requestAnimationFrame(()=>this.animate())}}let st;function yi(){return C(()=>{st=new wi,st.run=!0,st.animate()}),R(()=>{st.run=!1,st=""}),mi()}var vi=E("<div id=menu>"),xi=E("<div id=pile><canvas id=playground></canvas><button id=menu-button>next</button><dialog><h4>Like to get Notified?</h4><button>activate notifications"),bi=E("<button>");let Mt;function Pi(){ue("/demo-game/serviceworker.js")}const Mi=async()=>Notification.permission==="granted",Si=async()=>{if(await Notification.requestPermission()!=="granted")throw new Error("Notification permission not granted")};function Fi(i){window.localStorage.setItem("pageList",JSON.stringify(i))}function Ai(){let i=window.localStorage.getItem("pageList");return i?JSON.parse(i):null}function $i(){const[i,t]=nt(!1),[e,s]=nt(!1),[n,h]=nt({Beginners:!1,"Mutual Attraction":!1,AngleAndRadians:!1,Drawing:!1,"Harmonic Motion":!1,"Spring Forces":!1,"Particle System":!1,Steering:!1,"Falling Sands":!1,Perlin:!1,"Path Following":!1,"Flow Field":!1}),[a,l]=nt(!1);C(async()=>{Pi(),await Mi()||t(!0),ge(Mt),me(),l(!0);let f=Ai();f&&h({...n(),...f})});function d(u){const f=n();for(let v in f)f[v]=!1;f[u]=!0,h({...f}),s(!1),Fi(n())}return[p(T,{get when(){return F(()=>n().Beginners===!0)()&&a()},get children(){return p(Fe,{})}}),p(T,{get when(){return F(()=>n()["Mutual Attraction"]===!0)()&&a()},get children(){return p(Ee,{})}}),p(T,{get when(){return F(()=>n().AngleAndRadians===!0)()&&a()},get children(){return p(Ce,{})}}),p(T,{get when(){return F(()=>n().Drawing===!0)()&&a()},get children(){return p(Ge,{})}}),p(T,{get when(){return F(()=>n()["Harmonic Motion"]===!0)()&&a()},get children(){return p(_e,{})}}),p(T,{get when(){return F(()=>n()["Spring Forces"]===!0)()&&a()},get children(){return p(Oe,{})}}),p(T,{get when(){return F(()=>n()["Particle System"]===!0)()&&a()},get children(){return p(Xe,{})}}),p(T,{get when(){return F(()=>n().Steering===!0)()&&a()},get children(){return p(Qe,{})}}),p(T,{get when(){return F(()=>n()["Falling Sands"]===!0)()&&a()},get children(){return p(si,{})}}),p(T,{get when(){return F(()=>n().Perlin===!0)()&&a()},get children(){return p(oi,{})}}),p(T,{get when(){return F(()=>n()["Path Following"]===!0)()&&a()},get children(){return p(di,{})}}),p(T,{get when(){return F(()=>n()["Flow Field"]===!0)()&&a()},get children(){return p(yi,{})}}),(()=>{var u=xi(),f=u.firstChild,v=f.nextSibling,m=v.nextSibling,y=m.firstChild,x=y.nextSibling,k=Mt;return typeof k=="function"?oe(k,f):Mt=f,v.$$click=()=>s(!e()),ut(u,p(T,{get when(){return e()},get children(){var A=vi();return ut(A,p(re,{get each(){return Object.keys(n())},children:M=>(()=>{var $=bi();return $.$$click=()=>d(M),ut($,M),$})()})),A}}),m),x.$$click=()=>{Si(),t(!1)},pt(()=>m.open=i()),u})()]}le(["click"]);const Ei=document.getElementById("root");ae(()=>p($i,{}),Ei);
